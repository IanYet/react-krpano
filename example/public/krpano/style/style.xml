<krpano>
	<!-- 热点设置 -->
	<style name="hotspot_style" url="hotspot.png" scale="0.5" edge="top" distorted="true" onover="tween(scale,0.55);" onout="tween(scale,0.5);" />
	<style name="hotspot_style_go" url="hotspot2.png" scale="0.5" edge="top" distorted="true" onover="tween(scale,0.55);" onout="tween(scale,0.5);" />

	<!-- 自动旋转设置 -->
	<autorotate name="rotate" enabled="false" waittime="10.0" speed="1.0" horizon="0.0" tofov="360.0" />

	<!-- 行星入场 -->
	<!-- 配置清单 -->
	<planet_config enable="true" angle="120" during="1" />
	<!-- 事件定义 -->
	<events name="skin_events" keep="true" onxmlcomplete="set(events[skin_events].onxmlcomplete,null); if(planet_config.enable , planet());" />
	<!-- 星球入场执行代码 -->
	<action name="planet">
        copy(lp_scene, xml.scene);
        copy(lp_hlookat, view.hlookat);
        copy(lp_vlookat, view.vlookat);
        copy(lp_fov, view.fov);
        copy(lp_fovmax, view.fovmax);
        copy(lp_limitview, view.limitview);
        set(view.fovmax, 170);
        set(view.limitview, lookto);
        set(view.vlookatmin, 90);
        set(view.vlookatmax, 90);
        set_hotspot_visible(false);
        set(layer[skin_layer].visible,false);set(layer[skin_layer].alpha,0);
        set(layer[skin_control_bar].visible,false);set(layer[skin_control_bar].alpha,0);
        set(layer[skin_splitter_bottom].visible,false);set(layer[skin_splitter_bottom].alpha,0);
        lookat(calc(lp_hlookat + planet_config.angle), 90, 150, 1, 0, 0);
        set(lp_running,true);
        set(events[lp_events].onloadcomplete,
        delayedcall(calc(planet_config.during),
        if(lp_scene === xml.scene,
        set(control.usercontrol, off);
        copy(view.limitview, lp_limitview);
        set(view.vlookatmin, null);
        set(view.vlookatmax, null);
        tween(view.hlookat|view.vlookat|view.fov|view.distortion, calc('' + lp_hlookat + '|' + lp_vlookat + '|' + lp_fov + '|' + 0.0),
        3, easeOutQuad,
        set(control.usercontrol, all);
        tween(view.fovmax, get(lp_fovmax));
        );
        set(lp_running,false);
        delayedcall(3,set_hotspot_visible(true))
        set(layer[skin_layer].visible,true);tween(layer[skin_layer].alpha,1,1);
        set(layer[skin_control_bar].visible,true);tween(layer[skin_control_bar].alpha,1,1);
        set(layer[skin_splitter_bottom].visible,true);tween(layer[skin_splitter_bottom].alpha,1,1);
        );
        );
        );
	</action>
    <action name="set_hotspot_visible">
        for(set(i,0),i LT hotspot.count,inc(i),
        if(%1 == false,
        if(hotspot[get(i)].visible == true,
        set(hotspot[get(i)].mark,true);set(hotspot[get(i)].visible,%1);
        );
        ,
        if(hotspot[get(i)].mark == true OR hotspot[get(i)].mark2 == true,
        set(hotspot[get(i)].visible,%1);
        );
        );
        );
    </action>
    <!-- 行星入场 -->
</krpano>
